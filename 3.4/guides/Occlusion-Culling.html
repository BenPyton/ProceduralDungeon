<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.4 docs-doc-page docs-doc-id-guides/Advanced-Features/Occlusion-Culling" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Occlusion Culling | Procedural Dungeon Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://benpyton.github.io/ProceduralDungeon/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://benpyton.github.io/ProceduralDungeon/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Occlusion-Culling"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.4"><meta data-rh="true" name="docsearch:version" content="3.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.4"><meta data-rh="true" property="og:title" content="Occlusion Culling | Procedural Dungeon Wiki"><meta data-rh="true" name="description" content="The occlusion culling system of this plugin consists of showing only the necessary rooms to avoid a lots of mesh drawing and thus improving performances."><meta data-rh="true" property="og:description" content="The occlusion culling system of this plugin consists of showing only the necessary rooms to avoid a lots of mesh drawing and thus improving performances."><link data-rh="true" rel="icon" href="/ProceduralDungeon/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Occlusion-Culling"><link data-rh="true" rel="alternate" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Occlusion-Culling" hreflang="en"><link data-rh="true" rel="alternate" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Occlusion-Culling" hreflang="x-default"><link rel="stylesheet" href="/ProceduralDungeon/assets/css/styles.f5b395a4.css">
<script src="/ProceduralDungeon/assets/js/runtime~main.42f7d010.js" defer="defer"></script>
<script src="/ProceduralDungeon/assets/js/main.98d340f7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ProceduralDungeon/"><div class="navbar__logo"><img src="/ProceduralDungeon/img/Icon128.png" alt="Wiki Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ProceduralDungeon/img/Icon128.png" alt="Wiki Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Procedural Dungeon Wiki</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/guides/Home">Guides</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/api">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/contributing">Contributing</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/ProceduralDungeon/3.4/guides/Occlusion-Culling">3.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ProceduralDungeon/guides/Advanced-Features/Occlusion-Culling">3.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/ProceduralDungeon/3.4/guides/Occlusion-Culling">3.4</a></li><li><a class="dropdown__link" href="/ProceduralDungeon/3.3">3.3</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/BenPyton/ProceduralDungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Plugin Sources<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/BenPyton/DungeonExample" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Example Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/YE2dPda2CC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img alt="Discord" src="https://img.shields.io/discord/1182461404092055574?style=for-the-badge&logo=discord&logoColor=white&label=Discord&color=5865F2"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/ProceduralDungeon/3.4">Home</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/ProceduralDungeon/3.4/guides/Home">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ProceduralDungeon/3.4/guides/Installation">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ProceduralDungeon/3.4/guides/Occlusion-Culling">Advanced Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ProceduralDungeon/3.4/guides/Occlusion-Culling">Occlusion Culling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Door-Types">Door Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Room-Initialization">Room Initialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Room-Custom-Data">Room Custom Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Room-Visitor">Room Visitor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Room-Observer">Room Observer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Advanced-Features/Custom-Create-Dungeon">Custom Create Dungeon Function</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ProceduralDungeon/3.4/guides/Console-Commands">Misc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices">Best Practices</a><button aria-label="Expand sidebar category &#x27;Best Practices&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ProceduralDungeon/3.4/api">API References</a><button aria-label="Expand sidebar category &#x27;API References&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ProceduralDungeon/3.4/contributing">Contributing</a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><i>Support me!</i></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><a href="https://ko-fi.com/M4M3NW2JV"><img src="https://img.shields.io/badge/Ko--fi-FF5E5B?logo=kofi&logoColor=fff&style=for-the-badge" alt="Donate on Ko-fi"><br>                  <a href="https://liberapay.com/BenPyton/donate"><img src="https://img.shields.io/badge/Liberapay-F6C915?logo=liberapay&logoColor=000&style=for-the-badge" alt="Donate on Liberapay"><br>                  <a href="https://www.paypal.com/donate/?hosted_button_id=9VWP66JU5DZXN"><img src="https://img.shields.io/badge/PayPal-003087?logo=paypal&logoColor=fff&style=for-the-badge" alt="Donate on PayPal"></a></a></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 3.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Occlusion Culling</h1></header>
<p>The occlusion culling system of this plugin consists of showing only the necessary rooms to avoid a lots of mesh drawing and thus improving performances.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This feature is badly named!
There is no real &quot;occlusion&quot; computation done, the room visibilities are toggled even when there is no occlusion of the room.<br>
<!-- -->I will rename that as <code>Room Culling</code> instead in a future version of the plugin, this is more accurate.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Only the visibility of meshes is toggled. The ticking, animations, collisions, etc. are kept! So, the possible performance gain is on the rendering only!</p></div></div>
<p>You can toggle this system on or off in the <a href="/ProceduralDungeon/3.4/guides/Plugin-Settings">Plugin Settings</a> alongside some other occlusion settings:</p>
<ul>
<li>The <code>occlusion distance</code> determine how many rooms are visible from the player&#x27;s room.</li>
<li><code>Occlude dynamic actors</code> allows dynamic actors spawned after the dungeon generation and/or moving between rooms to be occluded with the rooms by the plugin. You&#x27;ll also have to put a <code>Room Visibility Component</code> on those actors.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-the-occlusion-system-works">How the occlusion system works<a href="#how-the-occlusion-system-works" class="hash-link" aria-label="Direct link to How the occlusion system works" title="Direct link to How the occlusion system works">​</a></h2>
<p>The dungeon generator actor will keep track of the local player (<code>GetPlayerController(0)</code>) to know in which room it is located (referred later as the <code>Current Player Room</code>).</p>
<p>Then, the generator actor will toggle the visibility state of the <code>Current Player Room</code> and its directly connected rooms, and their own directly connected rooms, etc. based on the <code>Occlusion Distance</code> in the <a href="/ProceduralDungeon/3.4/guides/Plugin-Settings">Plugin Settings</a> (<code>1</code> is only the <code>Current Player Room</code>, <code>2</code> is its direct connected rooms, etc.).</p>
<p>Each room will then toggle the visibility of their owned actors (the ones placed directly in their level).<br>
<!-- -->If an actor is spawned during runtime, it will not belongs to any room level, and so their visibility will not be toggled.<br>
<!-- -->If an actor can move between rooms during the gameplay, you should not place it directly in the room level, as it will still belong to it and be occluded with that room instead of the one the actor is located in.</p>
<p>If you want to have actors that can travel across rooms, you should create a spawner actor placed in the room levels, which will spawn your &quot;dynamic&quot; actor that will then be not attached to a specific room.</p>
<p>However, if you want this dynamic actor to be occluded properly with the rooms, you have to add a <code>Room Visibility Component</code> on it (see below for more details on it).</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><a href="/ProceduralDungeon/3.4/guides/Geometry-Brushes">Geometry Brushes</a> can&#x27;t have there visibility toggled, and so can&#x27;t be hidden by the occlusion culling system.
You should convert them into static meshes in order to make them occluded correctly with the rooms.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="room-visibility-component">Room Visibility Component<a href="#room-visibility-component" class="hash-link" aria-label="Direct link to Room Visibility Component" title="Direct link to Room Visibility Component">​</a></h2>
<p>This actor component allows the actor to be tracked by the dungeon&#x27;s rooms and so be occluded with them.</p>
<p>You need to toggle on <code>Occlude Dynamic Actors</code> in the <a href="/ProceduralDungeon/3.4/guides/Plugin-Settings">Plugin Settings</a> in order to make it working.</p>
<p>What is available from this component:</p>
<ul>
<li><code>Is Visible</code> function returns true if the actor is inside a visible room.</li>
<li><code>Set Visibility</code> allows you to set the visibility mode<!-- -->
<ul>
<li><code>Same As Room</code> will toggle actor&#x27;s visibility based on <code>Is Visible</code> value.</li>
<li><code>Force Hidden</code>and <code>Force Visible</code> will turn visibility on/off regardless the <code>Is Visible</code> value.</li>
<li><code>Custom</code> will does nothing itself and lets you manage the actor&#x27;s visibility. You can then use <code>Is Visible</code> and/or your own logic to toggle actor&#x27;s visibility.</li>
</ul>
</li>
<li><code>Get Visibility</code> will returns the current visibility mode set by <code>Set Visibility</code>.</li>
<li><code>On Room Visibility Changed</code> is a delegate called when the <code>Is Visible</code> value changes. Useful for example when you have a <code>Custom</code> visibility and you are changing your actor visibility by events instead of in <code>Tick</code>.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-the-occlusion-system-works" class="table-of-contents__link toc-highlight">How the occlusion system works</a></li><li><a href="#room-visibility-component" class="table-of-contents__link toc-highlight">Room Visibility Component</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>