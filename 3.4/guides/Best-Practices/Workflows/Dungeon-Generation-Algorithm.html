<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.4 docs-doc-page docs-doc-id-guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Creating Dungeon Generation Algorithm | Procedural Dungeon Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://benpyton.github.io/ProceduralDungeon/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://benpyton.github.io/ProceduralDungeon/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.4"><meta data-rh="true" name="docsearch:version" content="3.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.4"><meta data-rh="true" property="og:title" content="Creating Dungeon Generation Algorithm | Procedural Dungeon Wiki"><meta data-rh="true" name="description" content="If you struggle creating the dungeons you want, this page will help you getting a good basic workflow to design and code the dungeon you want to generate."><meta data-rh="true" property="og:description" content="If you struggle creating the dungeons you want, this page will help you getting a good basic workflow to design and code the dungeon you want to generate."><link data-rh="true" rel="icon" href="/ProceduralDungeon/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm"><link data-rh="true" rel="alternate" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm" hreflang="en"><link data-rh="true" rel="alternate" href="https://benpyton.github.io/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm" hreflang="x-default"><link rel="stylesheet" href="/ProceduralDungeon/assets/css/styles.e1987e25.css">
<script src="/ProceduralDungeon/assets/js/runtime~main.f5e83dbd.js" defer="defer"></script>
<script src="/ProceduralDungeon/assets/js/main.c39ef94c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ProceduralDungeon/"><div class="navbar__logo"><img src="/ProceduralDungeon/img/Icon128.png" alt="Wiki Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ProceduralDungeon/img/Icon128.png" alt="Wiki Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Procedural Dungeon Wiki</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/guides/Home">Guides</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/api">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ProceduralDungeon/3.4/contributing">Contributing</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">3.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ProceduralDungeon/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">3.6</a></li><li><a class="dropdown__link" href="/ProceduralDungeon/3.5/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">3.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">3.4</a></li><li><a class="dropdown__link" href="/ProceduralDungeon/3.3/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">3.3</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://fab.com/listings/62cbdceb-ae3c-4fe4-adac-39d751a15df9" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Plugin on Fab<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/BenPyton/ProceduralDungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Plugin Sources<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/BenPyton/DungeonExample" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Example Project<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://discord.gg/YE2dPda2CC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img alt="Discord" src="https://img.shields.io/discord/1182461404092055574?style=for-the-badge&logo=discord&logoColor=white&label=Discord&color=5865F2"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/ProceduralDungeon/3.4">Home</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/ProceduralDungeon/3.4/guides/Home">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ProceduralDungeon/3.4/guides/Installation">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ProceduralDungeon/3.4/guides/Occlusion-Culling">Advanced Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ProceduralDungeon/3.4/guides/Console-Commands">Misc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices">Best Practices</a><button aria-label="Collapse sidebar category &#x27;Best Practices&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/3Cs">Workflows</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/3Cs">The 3Cs of a Game</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/Dungeon-Generation-Algorithm">Creating Dungeon Generation Algorithm</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item hidden"><a class="menu__link" tabindex="0" href="/ProceduralDungeon/3.4/guides/Best-Practices">Best Practices</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ProceduralDungeon/3.4/api">API References</a><button aria-label="Expand sidebar category &#x27;API References&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ProceduralDungeon/3.4/contributing">Contributing</a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><i>Support me!</i></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><a href="https://ko-fi.com/M4M3NW2JV"><img src="https://img.shields.io/badge/Ko--fi-FF5E5B?logo=kofi&logoColor=fff&style=for-the-badge" alt="Donate on Ko-fi"><br>                  <a href="https://liberapay.com/BenPyton/donate"><img src="https://img.shields.io/badge/Liberapay-F6C915?logo=liberapay&logoColor=000&style=for-the-badge" alt="Donate on Liberapay"><br>                  <a href="https://www.paypal.com/donate/?hosted_button_id=9VWP66JU5DZXN"><img src="https://img.shields.io/badge/PayPal-003087?logo=paypal&logoColor=fff&style=for-the-badge" alt="Donate on PayPal"></a></a></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 3.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating Dungeon Generation Algorithm</h1></header>
<p>If you struggle creating the dungeons you want, this page will help you getting a good basic workflow to design and code the dungeon you want to generate.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To illustrate the workflow, I&#x27;ll use a simple example: a mall-like dungeon.<br>
<!-- -->This is only to help you understand the process behind creating your code based on a desired result.<br>
<!-- -->You can do anything else you want, you just have to follow the same steps.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Remember that you can do whatever you want!</p><p>You don&#x27;t need an end room if you want another goal for your dungeon (e.g. killing all the mobs).</p><p>You don&#x27;t need the player to spawn in the start room (or even have a specific room as a first room).
You could for example have multiple rooms with a player start actor you choose from to spawn the player.</p><p>You can add any variables you want in your room data to add constraints on your generation rules (e.g. add a room difficulty value so you can choose a hard room after an easy room).</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-defining-what-we-want">1. Defining what we want<a href="#1-defining-what-we-want" class="hash-link" aria-label="Direct link to 1. Defining what we want" title="Direct link to 1. Defining what we want">​</a></h2>
<p>The first step is to write down the features of our dungeon and the end result we want to have.</p>
<p>I want to make a mall-like dungeon.
A mall is basically composed of 3 types of rooms:</p>
<ul>
<li>Shops</li>
<li>Corridors (to navigate from one shop to another)</li>
<li>Large open spaces (contain stairs and escalators to navigate through floors)</li>
</ul>
<p>To keep my example simple, I don&#x27;t want to have a start and end room. The player will spawn at any shop and the goal is to kill a creature using items found throughout the mall.<br>
<!-- -->This allows me to also demonstrate you are not constrained to a type of dungeon layout.</p>
<p>Here a drawing of a part of the layout we would want to generate (I&#x27;ve colored the rooms depending on their types: blue for corridor, red for shop, green for open space):</p>
<p><img decoding="async" loading="lazy" alt="Mall-like Layout" src="/ProceduralDungeon/assets/images/mall-like_layout-4600b8d63708082aa5a6f888cede5abd.png" width="1174" height="1063" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>I have drawn only one floor of the dungeon to keep the drawing simple, but the open spaces are meant to have doors on multiple floors, so the generated dungeon will have multiple floors like a real mall.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>I tried to standardize the room sizes to fill the most space possible and create loops easily.<br>
<!-- -->I used the width of a corridor as a room unit to have simpler room size values and to make it scalable easily depending on the camera view chosen when designing the <a href="/ProceduralDungeon/3.4/guides/Best-Practices/Workflows/3Cs">3Cs</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-deducing-the-pieces-of-the-puzzle">2. Deducing the pieces of the puzzle<a href="#2-deducing-the-pieces-of-the-puzzle" class="hash-link" aria-label="Direct link to 2. Deducing the pieces of the puzzle" title="Direct link to 2. Deducing the pieces of the puzzle">​</a></h2>
<p>Once we&#x27;ve defined the result we want to achieve, we will list all the pieces we need to assemble this puzzle.</p>
<p>After drawing the layout I want, I noticed I will need 2 types of doors:</p>
<ul>
<li>Doors connecting corridors to shops (in orange). They are automatic sliding doors.</li>
<li>Doors connecting corridors between them or with open spaces (in green). They have no meshes at all so this will create a feeling of continuity.</li>
</ul>
<p>Also, I&#x27;ve used only 4 rooms to get a good looking result:</p>
<p><img decoding="async" loading="lazy" alt="Mall-like Rooms" src="/ProceduralDungeon/assets/images/mall-like_rooms-b7a33f3ddc4839230d0f3f6d8cddbe26.png" width="758" height="505" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Those rooms are just the room definitions (size and doors), but several rooms can be created for each of them (for example different kind of shops), breaking the feeling of repetitiveness for players while keeping the dungeon layout simple.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-deducing-the-constraints">3. Deducing the constraints<a href="#3-deducing-the-constraints" class="hash-link" aria-label="Direct link to 3. Deducing the constraints" title="Direct link to 3. Deducing the constraints">​</a></h2>
<p>Once we have our small pieces and the ideal layout we want to achieve, we can deduce the &quot;constraints&quot; (or &quot;rules&quot;) of room placement.</p>
<p>In the case of my example, I noticed those constraints:</p>
<ul>
<li>2 open spaces can&#x27;t be directly connected.</li>
<li>2 shops can&#x27;t be connected directly.</li>
<li>There are less corridors 1x1 than corridors 3x1 (about 20% 1x1 and 80% 3x1)</li>
<li>Corridors 1x1 are not directly connected to other corridors 1x1</li>
<li>Open spaces are less likely to to appear than any other corridor (about 10% open space and 90% corridors)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-writing-pseudo-code">4. Writing pseudo-code<a href="#4-writing-pseudo-code" class="hash-link" aria-label="Direct link to 4. Writing pseudo-code" title="Direct link to 4. Writing pseudo-code">​</a></h2>
<p>Once the constraints have been deduced, we can write quickly a pseudo-code based on those constraints to see how we can determine the next room based on the current room.</p>
<p>I&#x27;ll use the terms <code>currentRoom</code> for the room already generated, and <code>door</code> for the door on which the next room will be connected to the <code>currentRoom</code>.<br>
<!-- -->I didn&#x27;t created a &quot;start&quot; and an &quot;end&quot;, so I decide to use an open space as first generated room, and stop adding corridors after a number of room is reached (called <code>minRoomCount</code> in my pseudo-code).</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Pseudo-code of ChooseNextRoom function</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (door.type == shopDoor) and (currentRoom.type != shop) then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return random shop from a list of shop room</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">else if (door.type == corridorDoor) and (rooms.count &lt; minRoomCount) then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    randomNumber := get random number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (randomNumber &lt; 10%) then </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return random open space from a list of open space</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        randomNumber := get random number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (random number &lt; 20%)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return corridor 1x1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return corridor 3x1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        endif</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endif</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    no room placed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">endif</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This pseudo-code is a first draft and will need to be iterated on to get the best result. For example the percentage values can be tweaked, the conditions can be modified, new constraints can be added, etc.</p></div></div>
<p>Here I&#x27;ll break down how I&#x27;ve written it:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (door.type == shopDoor) and (currentRoom.type != shop) then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return random shop from a list of shop room</span><br></span></code></pre></div></div>
<p>I&#x27;ve placed first the most specific case: when we encounter a shop door, we want to place a shop <em>only</em> if the current room is not a shop.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">else if (door.type == corridorDoor) and (rooms.count &lt; minRoomCount) then</span><br></span></code></pre></div></div>
<p>We want to continue to place corridors at corridor doors until we reach the minimum number of room in the dungeon.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    randomNumber := get random number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (randomNumber &lt; 10%) then </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return random open space from a list of open space</span><br></span></code></pre></div></div>
<p>We store the random number in a variable, so that this number will not change for each check we do on it.<br>
<!-- -->Then if this number is below the &quot;open space&quot; threshold, we place an open space room.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        randomNumber := get random number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (random number &lt; 20%)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return corridor 1x1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return corridor 3x1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        endif</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endif</span><br></span></code></pre></div></div>
<p>Here I made an independent random number check because I&#x27;ve deduced a 80-20 ratio of corridors 3x1 and 1x1, but I could&#x27;ve scaled those values down to 90% total to use the same random number as the one used for the open space threshold.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    no room placed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">endif</span><br></span></code></pre></div></div>
<p>Finally, if another case than the previous one is encountered, we don&#x27;t place a room (for example, the dungeon generator may want to place a room from a shop, and in that case we don&#x27;t want to).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>I didn&#x27;t coded directly the code in blueprint to generate the dungeon.
Instead I wrote on paper the desired result and going through several steps to deduce the code from it.</p>
<p>The summary of the steps:</p>
<ul>
<li>Defining what are the components (room types) of our dungeon and drawing the desired result.</li>
<li>Deducing all the basic pieces (kind of rooms and type of doors).</li>
<li>Deducing the &quot;constraints&quot; (or &quot;rules&quot;) between those pieces.</li>
<li>Writing pseudo-code from those constraints.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-defining-what-we-want" class="table-of-contents__link toc-highlight">1. Defining what we want</a></li><li><a href="#2-deducing-the-pieces-of-the-puzzle" class="table-of-contents__link toc-highlight">2. Deducing the pieces of the puzzle</a></li><li><a href="#3-deducing-the-constraints" class="table-of-contents__link toc-highlight">3. Deducing the constraints</a></li><li><a href="#4-writing-pseudo-code" class="table-of-contents__link toc-highlight">4. Writing pseudo-code</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>