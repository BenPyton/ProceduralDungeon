"use strict";(self.webpackChunkprocedural_dungeon_wiki=self.webpackChunkprocedural_dungeon_wiki||[]).push([[37518],{98803:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"guides/Advanced-Features/Randomness","title":"Managing Randomness","description":"Randomness is an important part of any procedural generation algorithm.\\\\","source":"@site/versioned_docs/version-3.5/guides/Advanced-Features/Randomness.md","sourceDirName":"guides/Advanced-Features","slug":"/guides/Advanced-Features/Randomness","permalink":"/ProceduralDungeon/3.5/guides/Advanced-Features/Randomness","draft":false,"unlisted":false,"tags":[],"version":"3.5","frontMatter":{"pagination_prev":null,"pagination_next":null},"sidebar":"homeSidebar"}');var s=t(74848),a=t(28453);const r={pagination_prev:null,pagination_next:null},i="Managing Randomness",d={},h=[{value:"Overview",id:"overview",level:2},{value:"Best practices to handle randomness",id:"best-practices-to-handle-randomness",level:2},{value:"How the plugin can help you",id:"how-the-plugin-can-help-you",level:2},{value:"The Deterministic Random Component",id:"the-deterministic-random-component",level:3}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"managing-randomness",children:"Managing Randomness"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Randomness is an important part of any procedural generation algorithm.",(0,s.jsx)(n.br,{}),"\n","You ",(0,s.jsx)(n.strong,{children:"must not"})," take easily on it and should think about it seriously from the beginning of your project.",(0,s.jsx)(n.br,{}),"\n","This page will show you some features provided by the plugin to help you with tat task and gives you some best practices as well."]})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["When prototyping your game, you will certainly use the basic ",(0,s.jsx)(n.code,{children:"Get Random"})," nodes provided by the engine.",(0,s.jsx)(n.br,{}),"\n","But this is quite dangerous, because each time you will launch your game, you'll get different results.\r\nWhen fixing bugs, this is a real nightmare.",(0,s.jsx)(n.br,{}),"\n","This is why you should always use ",(0,s.jsx)(n.strong,{children:"deterministic"})," randomness in your code.",(0,s.jsx)(n.br,{}),"\n","Unreal Engine provides the same random nodes as the basic ones but with the suffix ",(0,s.jsx)(n.code,{children:"From Stream"})," at the end.\r\nThis means that they take an extra input, a ",(0,s.jsx)(n.code,{children:"Random Stream"})," struct, which holds the current state of a random number generator.",(0,s.jsx)(n.br,{}),"\n",'A random stream generates a new random number based a the previous one, and is initialized with a seed, which is just the first random number used to generate the subsequent ones.\r\nThat means the sequence of random numbers generated from the same seed will always be the same.\r\nThis is what is called a "deterministic" randomness.']}),"\n",(0,s.jsx)(n.h2,{id:"best-practices-to-handle-randomness",children:"Best practices to handle randomness"}),"\n",(0,s.jsxs)(n.p,{children:["Using one unique ",(0,s.jsx)(n.code,{children:"Random Stream"})," for the whole dungeon may seems obvious if you want only one seed to generate the dungeon.",(0,s.jsx)(n.br,{}),"\n","However, this is a really bad design, because any small change in your code using some randomness will drastically change your whole dungeon."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, let's say you want your lights in your dungeon to have random colors.\r\nWhen adding the code to choose a ",(0,s.jsx)(n.em,{children:"deterministic"})," random color to your light actors, the random stream will now give a random number to your light instead of what other code that should have taken it after that.\r\nSo, after the light actor, the whole number stream slides, giving different numbers to what need random numbers afterward."]}),"\n",(0,s.jsx)(n.p,{children:"To prevent that and make a robust random system that will not break your reproducibility of a dungeon whenever you change your code, you should use multiple random streams, initialized with some deterministic seed."}),"\n",(0,s.jsx)(n.h2,{id:"how-the-plugin-can-help-you",children:"How the plugin can help you"}),"\n",(0,s.jsxs)(n.p,{children:["When you generate a dungeon, there are many pieces that may need randomness: the generator algorithm, the room custom data, the actors and their components, etc.",(0,s.jsx)(n.br,{}),"\n","What you want to achieve is to generate the exact same dungeon from only one seed."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"/ProceduralDungeon/3.5/guides/Getting-Started/Generating-Dungeon/Dungeon-Generator",children:(0,s.jsx)(n.code,{children:"Dungeon Generator"})})," will generate a new seed for each generation depending on its settings.",(0,s.jsx)(n.br,{}),"\n","But how to use it in your actors placed in the room levels?"]}),"\n",(0,s.jsx)(n.h3,{id:"the-deterministic-random-component",children:"The Deterministic Random Component"}),"\n",(0,s.jsxs)(n.p,{children:["The plugin provides a ",(0,s.jsx)(n.a,{href:"/api/Classes/DeterministicRandomComponent",children:(0,s.jsx)(n.code,{children:"Deterministic Random"})})," component you can add to your actors.",(0,s.jsx)(n.br,{}),"\n","This component gives you a ",(0,s.jsx)(n.code,{children:"Random Stream"})," initialized with a deterministic seed, computed by combining several sources:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The dungeon generator's guid"}),"\n",(0,s.jsx)(n.li,{children:"The dungeon generator's seed"}),"\n",(0,s.jsx)(n.li,{children:"The owning room's ID"}),"\n",(0,s.jsxs)(n.li,{children:["The guid given through the ",(0,s.jsx)(n.a,{href:"/api/Classes/RoomActorGuid",children:(0,s.jsx)(n.code,{children:"Room Actor Guid"})})," interface if implemented (you can just add a ",(0,s.jsx)(n.a,{href:"/api/Classes/SimpleGuidComponent",children:(0,s.jsx)(n.code,{children:"Simple Guid"})})," component for that)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This makes the random stream of the actor completely local and independent to each others, but will return different results for each instance of your actor, and will stay deterministic from the dungeon seed as well.",(0,s.jsx)(n.br,{}),"\n","Also, this is a robust randomness, because when you place or remove new actor instances in your rooms, that will change nothing at all for the other actors."]})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(96540);const s={},a=o.createContext(s);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);